input {

  file {
    path => "/opt/log/nova.log"
    type => "nova"
  }

  file {
    path => "/opt/log/glance.log"
    type => "glance"
  }

  file {
    path => "/opt/log/neutron.log"
    type => "neutron"
  }

  file {
    path => "/opt/log/cinder.log"
    type => "cinder"
  }

  file {
    path => "/opt/log/keystone.log"
    type => "keystone"
  }
}

filter {

  grok {
    match => [
      "message", "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:loglevel} %{HOSTNAME:openstack_hostname} %{DATA:openstack_component} %{GREEDYDATA:message}"
    ]
  }

}

output {
  elasticsearch {
    host => "<%= @ipaddress_mgmt1 %>:9200"
    protocol => "http"
    cluster => "openstack"
    template_overwrite => "true"
  }
}
