---
profile::logging::rsyslog::client::manage_rsyslog:  false

profile::development::network::dns::manage_hosts: true

profile::application::openssl::catrust::ca_cert: '/opt/himlar/provision/ca/intermediate/certs/ca-chain.cert.pem'

profile::application::himlarcli::cacert:      '/opt/himlar/provision/ca/intermediate/certs/ca-chain.cert.pem'
profile::application::himlarcli::smtp:        ''
profile::application::himlarcli::from_addr:   ''

profile::openstack::openrc::cacert:           '/opt/himlar/provision/ca/intermediate/certs/ca-chain.cert.pem'

# Use newest test repositories
yum_base_mirror:    'https://download.iaas.uio.no/uh-iaas/test'

# Enable insecure ssl checks
sensu_ssl_cachain:  '-k'

# no proxy for vagrant environments
profile::network::yum_proxy::yum_proxy: ''

# Everything is enabled in vagrant
#profile::openstack::dashboard::manage_overrides:      false

# Enable radosgw object storage in vagrant
profile::openstack::identity::swift_enabled:          false
profile::openstack::identity::radosgw_enabled:        true

# Enable designate in vagrant
profile::openstack::identity::designate_enabled:  true
profile::openstack::dashboard::enable_designate:  true

# sensu
sensu__memory__check:     "check-memory-percent.rb -w 90 -c 95"

# FIXME:sensu-go

# vagrant ssl used in masterless puppet setup
include:
  default:
    - profile::application::openssl

profile::application::openssl::manage_ca_cert:          true

profile::monitoring::sensu::agent::enable_go_agent:     false #true
profile::monitoring::sensu::agent::enable_agent:        false
# only checks defined in location will be added to sensu-go
profile::monitoring::sensu::agent::merge_strategy:      'first'
profile::monitoring::sensu::agent::checks:              {}
profile::monitoring::sensu::agent::plugins:             {}
profile::monitoring::sensu::agent::namespaces:
  "%{hiera('sensu_namespace')}": {}

profile::base::yumrepo::repo_hash:
  sensu-community:
    ensure: present
